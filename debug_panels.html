<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Panel Debug - All Years</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
        background: #f0f0f0;
      }
      .debug-container {
        max-width: 1000px;
        margin: 0 auto;
        background: white;
        padding: 20px;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }
      .year-section {
        margin-bottom: 30px;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 8px;
      }
      .year-title {
        background: #e76f2c;
        color: white;
        padding: 10px;
        margin: -15px -15px 15px -15px;
        border-radius: 8px 8px 0 0;
        font-weight: bold;
      }
      .stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 10px;
        margin-bottom: 15px;
      }
      .stat-item {
        background: #f8f9fa;
        padding: 10px;
        border-radius: 5px;
        text-align: center;
      }
      .members-preview {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
        gap: 8px;
      }
      .member-preview {
        text-align: center;
        font-size: 0.8em;
      }
      .member-preview img {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        object-fit: cover;
        border: 2px solid #e76f2c;
      }
      .error {
        color: red;
      }
      .success {
        color: green;
      }
    </style>
  </head>
  <body>
    <div class="debug-container">
      <h1>Panel Members Debug - All Years</h1>
      <div id="debugResults">Loading...</div>
    </div>

    <script>
      async function debugAllPanels() {
        const debugDiv = document.getElementById("debugResults");
        debugDiv.innerHTML = "";

        try {
          const response = await fetch("Api/members.json");
          const data = await response.json();

          console.log("Full JSON data:", data);

          data.years.forEach((yearData) => {
            const yearSection = document.createElement("div");
            yearSection.className = "year-section";

            const panelCount = yearData.panel_members
              ? yearData.panel_members.length
              : 0;
            const secretaryCount = yearData.secretaries
              ? yearData.secretaries.length
              : 0;
            const totalCount = panelCount + secretaryCount;

            yearSection.innerHTML = `
                        <div class="year-title">Year ${yearData.year} (${
              yearData.year - 1
            }-${yearData.year})</div>
                        <div class="stats">
                            <div class="stat-item">
                                <strong>Panel Members:</strong> ${panelCount}
                            </div>
                            <div class="stat-item">
                                <strong>Secretaries:</strong> ${secretaryCount}
                            </div>
                            <div class="stat-item">
                                <strong>Total:</strong> ${totalCount}
                            </div>
                            <div class="stat-item ${
                              secretaryCount > 0 ? "success" : "error"
                            }">
                                <strong>SB Status:</strong> ${
                                  secretaryCount > 0 ? "Available" : "No Data"
                                }
                            </div>
                        </div>
                        <h4>Secretaries Preview:</h4>
                        <div class="members-preview" id="members-${
                          yearData.year
                        }">
                            ${
                              secretaryCount === 0
                                ? '<p class="error">No secretaries data available</p>'
                                : ""
                            }
                        </div>
                    `;

            debugDiv.appendChild(yearSection);

            // Add secretary previews
            if (yearData.secretaries && yearData.secretaries.length > 0) {
              const membersPreview = document.getElementById(
                `members-${yearData.year}`
              );
              yearData.secretaries.slice(0, 10).forEach((secretary) => {
                // Show first 10
                const memberDiv = document.createElement("div");
                memberDiv.className = "member-preview";
                memberDiv.innerHTML = `
                                <img src="${secretary.image}" alt="${secretary.name}" onerror="this.src='images/placeholder.png'">
                                <div>${secretary.name}</div>
                            `;
                membersPreview.appendChild(memberDiv);
              });

              if (yearData.secretaries.length > 10) {
                const moreDiv = document.createElement("div");
                moreDiv.className = "member-preview";
                moreDiv.innerHTML = `<div style="padding: 20px;">+${
                  yearData.secretaries.length - 10
                } more...</div>`;
                membersPreview.appendChild(moreDiv);
              }
            }
          });
        } catch (error) {
          debugDiv.innerHTML = `<p class="error">Error loading data: ${error.message}</p>`;
          console.error("Debug error:", error);
        }
      }

      debugAllPanels();
    </script>
  </body>
</html>
