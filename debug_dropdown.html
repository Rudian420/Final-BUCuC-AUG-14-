<!DOCTYPE html>
<html>
<head>
    <title>Debug Department Dropdown</title>
    <style>
        body { padding: 20px; font-family: Arial, sans-serif; }
        .form-control { padding: 10px; margin: 10px 0; width: 300px; }
    </style>
</head>
<body>
    <h1>Debug Department Dropdown Test</h1>
    
    <label>First Department:</label>
    <select id="signup-first-dept" class="form-control" required>
        <option value="">Select Department</option>
    </select>
    
    <label>Second Department:</label>
    <select id="signup-second-dept" class="form-control" required>
        <option value="">Select Department</option>
    </select>

    <script>
        console.log('Script starting...');
        
        // Department options array
        const departmentOptions = [
            { value: 'Admin', text: 'Admin' },
            { value: 'PR', text: 'PR - Public Relations and Editorial' },
            { value: 'HR', text: 'HR - Human Resources' },
            { value: 'EM', text: 'EM - Event Management and Logistics' },
            { value: 'Creative', text: 'Creative' },
            { value: 'Performance', text: 'Performance' },
            { value: 'RD', text: 'R&D - Research and Development' },
            { value: 'MIAP', text: 'MIAP - Marketing IT Archive & Photography' },
            { value: 'Finance', text: 'Finance' }
        ];
        
        console.log('Department options:', departmentOptions);
        
        // Function to populate dropdown options
        function populateDropdown(dropdown, excludeValue = null) {
            console.log('Populating dropdown:', dropdown.id, 'excluding:', excludeValue);
            
            if (!dropdown) {
                console.error('Dropdown element not found!');
                return;
            }
            
            // Clear existing options except the first one (placeholder)
            dropdown.innerHTML = '<option value="">Select Department</option>';
            
            // Populate with department options
            departmentOptions.forEach(dept => {
                if (dept.value !== excludeValue) {
                    const option = document.createElement('option');
                    option.value = dept.value;
                    option.textContent = dept.text;
                    dropdown.appendChild(option);
                }
            });
            
            console.log('Populated dropdown with', dropdown.options.length - 1, 'options');
        }
        
        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, initializing...');
            
            const firstDeptSelect = document.getElementById('signup-first-dept');
            const secondDeptSelect = document.getElementById('signup-second-dept');
            
            console.log('First dropdown found:', firstDeptSelect !== null);
            console.log('Second dropdown found:', secondDeptSelect !== null);
            
            if (!firstDeptSelect || !secondDeptSelect) {
                console.error('Dropdown elements not found!');
                return;
            }
            
            // Initial population
            populateDropdown(firstDeptSelect);
            populateDropdown(secondDeptSelect);
            
            console.log('Dropdowns populated successfully!');
            
            // Add event listeners
            firstDeptSelect.addEventListener('change', function() {
                console.log('First dropdown changed to:', this.value);
                populateDropdown(secondDeptSelect, this.value);
            });
            
            secondDeptSelect.addEventListener('change', function() {
                console.log('Second dropdown changed to:', this.value);
                populateDropdown(firstDeptSelect, this.value);
            });
        });
    </script>
</body>
</html>
